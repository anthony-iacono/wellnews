(this.webpackJsonpwellnews=this.webpackJsonpwellnews||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){},27:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),s=n(19),r=n.n(s),a=n(22),l=n(8),o=n(3),u=n(2),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"home";return fetch("https://api.nytimes.com/svc/topstories/v2/".concat(e,".json?api-key=GKUzDD1VY9ssjZ1AGusX3ci6AeoXCaSr")).then((function(e){return j(e)})).then((function(e){return m(e.results.slice(0,3))}))},j=function(e){if(!e.ok)throw new Error("".concat(e.status," Error"));return e.json()},m=function(e){return e.map((function(e){var t=e.section,n=e.title,c=e.abstract,i=e.short_url,s=e.multimedia,r=e.url;return{topic:t,title:n,abstract:c,short_url:i,sentiment:0,multimedia:s[0],id:r.slice(24,-5).replace(/\//g,"-")}}))},b=(n(27),n(0)),h=function(e){var t=e.updateUserSentiment,n=Object(u.f)(),c=function(e){t(e),n.push("/feed")};return Object(b.jsxs)("section",{className:"questionnaire",children:[Object(b.jsx)("header",{className:"questionnaire-header",children:Object(b.jsx)("div",{className:"blue-stripe",children:Object(b.jsxs)("h1",{className:"header-text cy-header-text",children:["Well",Object(b.jsx)("span",{className:"header-text-2",children:"News"})]})})}),Object(b.jsx)("h2",{className:"cy-sentiment-question",children:"What kind of mood are you in?"}),Object(b.jsxs)("div",{className:"sentiments-container",children:[Object(b.jsx)("button",{className:"sentiment-btn cy-strongly-negative-btn","aria-label":"strongly negative",title:"strongly negative",onClick:function(){return c(0)},children:"\u2639\ufe0f"}),Object(b.jsx)("button",{className:"sentiment-btn cy-negative-btn","aria-label":"negative",title:"negative",onClick:function(){return c(2)},children:"\ud83d\ude41"}),Object(b.jsx)("button",{className:"sentiment-btn cy-neutral-btn","aria-label":"neutral",title:"neutral",onClick:function(){return c(5)},children:"\ud83d\ude36"}),Object(b.jsx)("button",{className:"sentiment-btn cy-positive-btn","aria-label":"positive",title:"positive",onClick:function(){return c(8)},children:"\ud83d\ude42"}),Object(b.jsx)("button",{className:"sentiment-btn cy-strongly-positive-btn","aria-label":"strongly positive",title:"strongly positive",onClick:function(){return c(10)},children:"\ud83d\ude01"})]}),Object(b.jsx)("button",{className:"skip-btn",onClick:function(){return c(5)},children:"Skip"}),Object(b.jsx)("button",{className:"view-synopsis-button cy-view-synopsis-button",name:"viewSynopsisButton",onClick:function(e){e.preventDefault(),document.getElementById("synopsisInfo").classList.toggle("hidden")},children:"Why we ask? \u25bd"}),Object(b.jsxs)("article",{className:"hidden wellnews-synopsis cy-wellnews-synopsis",id:"synopsisInfo",children:[Object(b.jsx)("p",{children:"Based on your mood and the articles you read, we dynamically sort your feed and nudge you toward sentimental balance. We don't filter your feed."}),Object(b.jsx)("p",{children:"If you prefer, skip the questionnare and we'll sort your feed based only on the articles you read."})]})]})},O=(n(16),function(e){var t=e.title,n=e.image,c=e.id,i=e.sentiment,s=e.topic,r=e.updateUserSentiment,a=e.storeArticle;return Object(b.jsx)("div",{className:"article-boundary",children:Object(b.jsx)("div",{className:"card-container",children:Object(b.jsxs)("article",{className:"news-card cy-article-card",children:[Object(b.jsxs)(o.b,{to:"/feed/".concat(c),onClick:function(){a(c),r(i)},className:"cy-article-link",children:[Object(b.jsxs)("div",{className:"article-image-container",children:[i>=7&&Object(b.jsx)("h3",{className:"article-sentiment green",children:i}),i<=3&&Object(b.jsx)("h3",{className:"article-sentiment red",children:i}),i>=4&&i<=6&&Object(b.jsx)("h3",{className:"article-sentiment blue",children:i}),Object(b.jsx)("img",{className:"article-image cy-article-image",src:n,alt:t})]}),Object(b.jsx)("div",{className:"topic-container",children:Object(b.jsx)("p",{className:"topic-text",children:s})}),Object(b.jsx)("h2",{className:"article-title cy-article-title",children:t})]}),Object(b.jsx)("div",{className:"divider"})]})})})}),p=(n(17),function(){return Object(b.jsx)("header",{className:"header",children:Object(b.jsxs)("div",{className:"header-elements-container",children:[Object(b.jsx)(o.b,{to:"/",children:Object(b.jsx)("button",{className:"check-in-btn",children:Object(b.jsx)("span",{className:"check-in-text",children:"Check In"})})}),Object(b.jsxs)("h1",{className:"header-txt cy-header-txt",children:["Well",Object(b.jsx)("span",{className:"header-text-2",children:"News"})]}),Object(b.jsx)(o.b,{to:"/history",children:Object(b.jsx)("button",{className:"history-btn",children:"History"})}),Object(b.jsx)(o.b,{to:"/search-topic",children:Object(b.jsx)("button",{className:"list-btn","aria-label":"Browse by Topic"})})]})})}),x=(n(18),function(e){var t=e.unreadArticles,n=e.updateUserSentiment,c=e.storeArticle,i=[];return t&&(i=t.map((function(e){return Object(b.jsx)(O,{title:e.title,image:e.multimedia.url,id:e.id,sentiment:e.sentiment,topic:e.topic,updateUserSentiment:n,storeArticle:c},e.title)}))),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(p,{}),Object(b.jsx)("div",{className:"articles-container",children:Object(b.jsx)("section",{className:"articles-display",children:i.length?i:Object(b.jsx)(o.b,{to:"/search-topic",children:Object(b.jsx)("button",{className:"find-more-btn",children:"Find more articles by topic"})})})})]})}),f=(n(37),"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Aliquam ut porttitor leo a diam sollicitudin tempor id eu. In arcu cursus euismod quis viverra nibh cras pulvinar mattis. A diam maecenas sed enim. Ipsum dolor sit amet consectetur. Mauris commodo quis imperdiet massa tincidunt nunc pulvinar sapien. Tellus integer feugiat scelerisque varius morbi. Ac placerat vestibulum lectus mauris ultrices eros in cursus turpis. Gravida neque convallis a cras semper auctor. Suspendisse in est ante in nibh mauris cursus mattis molestie."),g=function(e){var t=e.title,n=e.image,c=e.abstract,i=e.caption;e.selectedTopic;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(p,{}),Object(b.jsxs)("section",{className:"single-article-container",children:[Object(b.jsxs)("figure",{children:[Object(b.jsx)("img",{src:n,alt:i,className:"single-article-image cy-single-article-image"}),Object(b.jsx)("figcaption",{className:"single-article-caption cy-single-article-caption",children:i})]}),Object(b.jsx)("h2",{className:"single-article-title cy-single-article-title",children:t}),Object(b.jsx)("p",{className:"cy-single-article-abstract",children:c}),Object(b.jsx)("p",{children:f}),Object(b.jsx)("p",{children:f}),Object(b.jsx)("p",{children:f}),Object(b.jsx)("p",{children:f}),Object(b.jsx)("p",{children:f})]})]})},y=(n(38),function(e){var t=e.assignTopic,n=["arts","automobiles","books","business","fashion","food","health","home","insider","magazine","movies","nyregion","obituaries","opinion","politics","realestate","science","sports","sundayreview","technology","theater","t-magazine","travel","upshot","us","world"].map((function(e){return Object(b.jsx)(o.b,{className:"topic",to:"/feed/".concat(e),onClick:function(){return t(e)},children:e},e)}));return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(p,{}),Object(b.jsx)("h3",{className:"browse-topics",children:"Browse articles by topic:"}),Object(b.jsx)("form",{className:"cy-topic-selection",children:n})]})}),N=function(e){var t=e.title,n=e.image,c=e.id,i=e.sentiment,s=e.topic,r=e.updateUserSentiment,a=e.selectedTopic,l=e.storeArticle;console.log(i);return Object(b.jsx)("div",{className:"card-container",children:Object(b.jsxs)("article",{className:"news-card cy-article-card",children:[Object(b.jsxs)(o.b,{to:"/feed/".concat(a,"/").concat(c),onClick:function(){r(i),l(c)},className:"cy-article-link",children:[Object(b.jsxs)("div",{className:"article-image-container",children:[i>=7&&Object(b.jsx)("h3",{className:"article-sentiment green",children:i}),i<=3&&Object(b.jsx)("h3",{className:"article-sentiment red",children:i}),i>=4&&i<=6&&Object(b.jsx)("h3",{className:"article-sentiment blue",children:i}),Object(b.jsx)("img",{className:"article-image cy-article-image",src:n,alt:t})]}),Object(b.jsx)("div",{className:"topic-container",children:Object(b.jsx)("p",{className:"topic-text",children:s})}),Object(b.jsx)("h2",{className:"article-title cy-article-title",children:t})]}),Object(b.jsx)("div",{className:"divider"})]})})},v=function(e){var t=e.unreadArticles,n=e.updateUserSentiment,c=e.selectedTopic,i=e.storeArticle,s=[];return t&&(s=t.map((function(e){return Object(b.jsx)(N,{title:e.title,image:e.multimedia.url,id:e.id,sentiment:e.sentiment,updateUserSentiment:n,storeArticle:i,selectedTopic:c,topic:e.topic},e.title)}))),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(p,{}),Object(b.jsx)("div",{className:"articles-container",children:Object(b.jsx)("section",{className:"articles-display",children:s.length>0?s:Object(b.jsx)(o.b,{to:"/search-topic",children:Object(b.jsx)("button",{className:"find-more-btn",children:"Find more articles by topic"})})})})]})},w=(n(39),function(){var e=Object(u.g)();return Object(b.jsxs)("div",{children:[Object(b.jsxs)("h3",{className:"cy-error-message",children:["No match for ",Object(b.jsx)("code",{children:e.pathname})]}),Object(b.jsx)(o.b,{to:"/feed",className:"cy-feed-link",children:"Back to Feed"})]})}),S=(n(40),function(e){var t=e.history,n=e.storeArticle,c=e.updateUserSentiment,i=[];return t&&(i=t.map((function(e){return Object(b.jsx)(O,{title:e.title,image:e.multimedia.url,sentiment:e.sentiment,id:e.id,topic:e.topic,storeArticle:n,updateUserSentiment:c},e.title)}))),Object(b.jsx)("div",{className:"articles-container",children:Object(b.jsx)("section",{className:"articles-display",children:i.length?i:Object(b.jsx)("h3",{children:"No history"})})})}),k=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],i=t[1],s=Object(c.useState)([]),r=Object(l.a)(s,2),m=r[0],O=r[1],f=Object(c.useState)([]),N=Object(l.a)(f,2),k=N[0],A=N[1],U=Object(c.useState)(""),C=Object(l.a)(U,2),I=C[0],T=C[1],q=Object(c.useState)(null),F=Object(l.a)(q,2),B=F[0],E=F[1],J=Object(c.useState)([]),M=Object(l.a)(J,2),W=(M[0],M[1],Object(c.useState)("")),H=Object(l.a)(W,2),L=H[0],z=H[1];Object(c.useEffect)((function(){d().then((function(e){X(e).then((function(t){var n=e.map((function(e,n){return e.sentiment=Math.round(5*(t[n]+1)),e}));i(n)}))})).catch((function(e){return T(e.message)}))}),[]),Object(c.useEffect)((function(){var e=D();i(e)}),[B]),Object(c.useEffect)((function(){var e=G();O(e)}),[n,k]);var D=function(){return B>=0&&B<=3?n.slice().sort((function(e,t){return t.sentiment-e.sentiment})):B<=10&&B>=7?n.slice().sort((function(e,t){return e.sentiment-t.sentiment})):n.slice().sort((function(e,t){return.5-Math.random()}))},G=function(){return k.length?n.filter((function(e){return!k.find((function(t){return t.id===e.id}))})):n},X=function(e){return Promise.all(e.map((function(e){return function(e,t){var n=e+" "+t,c="beb0091844524790b7672a69bac06a2a";return console.log("token in use; remove before pushing"),fetch("https://api.dandelion.eu/datatxt/sent/v1/?lang=en&text=".concat(n,"&token=").concat(c)).then((function(e){return j(e)})).then((function(e){return e.sentiment.score})).catch((function(e){return console.log("error: ",e)}))}(e.title,e.abstract)})))},_=function(e){if(null===B)return E(e);E((B+e)/2)},K=function(e){var t=n.find((function(t){return t.id===e})),c=JSON.parse(localStorage.getItem("wellnewsHistory"));if(!c)return localStorage.setItem("wellnewsHistory",JSON.stringify([e])),A([t]);c.includes(e)||(c.push(e),localStorage.setItem("wellnewsHistory",JSON.stringify(c)),A([].concat(Object(a.a)(k),[t])))};return Object(b.jsx)("div",{className:"app-container",children:Object(b.jsx)(o.a,{children:Object(b.jsxs)(u.c,{children:[Object(b.jsx)(u.a,{exact:!0,path:"/",children:Object(b.jsx)(h,{updateUserSentiment:_})}),Object(b.jsx)(u.a,{exact:!0,path:"/feed",render:function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(x,{unreadArticles:m,updateUserSentiment:_,storeArticle:K}),0===n.length&&Object(b.jsx)("h2",{className:"loading-text",children:"Loading... "}),I&&Object(b.jsx)("h2",{children:I})]})}}),Object(b.jsx)(u.a,{exact:!0,path:"/feed/".concat(L),render:function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(v,{unreadArticles:m,updateUserSentiment:_,selectedTopic:L,storeArticle:K}),!n.length&&Object(b.jsx)("h2",{children:"Loading.. "}),I&&Object(b.jsx)("h2",{children:I})]})}}),Object(b.jsx)(u.a,{exact:!0,path:"/search-topic",children:Object(b.jsx)(y,{assignTopic:function(e){z(e),d(e).then((function(e){X(e).then((function(t){var n=e.map((function(e,n){return e.sentiment=Math.round(5*(t[n]+1)),e}));i(n)}))})).catch((function(e){return T(e.message)}))}})}),Object(b.jsx)(u.a,{exact:!0,path:"/feed/:id",render:function(e){var t=e.match.params.id,c=n.find((function(e){return e.id===t}));return c?Object(b.jsx)(g,{title:c.title,image:c.multimedia.url,caption:c.multimedia.caption,abstract:c.abstract,selectedTopic:L},c.title):Object(b.jsx)(w,{})}}),Object(b.jsx)(u.a,{exact:!0,path:"/feed/".concat(L,"/:id"),render:function(e){var t=e.match.params.id,c=n.find((function(e){return e.id===t}));return c?Object(b.jsx)(g,{title:c.title,image:c.multimedia.url,caption:c.multimedia.caption,abstract:c.abstract,selectedTopic:L},c.title):Object(b.jsx)(w,{})}}),Object(b.jsx)(u.a,{exact:!0,path:"/history",render:function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(p,{}),Object(b.jsx)(S,{history:k,storeArticle:K,updateUserSentiment:_}),I&&Object(b.jsx)("h2",{children:I})]})}}),Object(b.jsx)(u.a,{path:"*",component:w})]})})})};n(41);r.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(k,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.2e8881d4.chunk.js.map